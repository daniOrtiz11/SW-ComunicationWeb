<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> 
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="shortcut icon" href="./includes/img/communication.png" />

		<title>SW-Comunication</title>
	 
		<!-- CSS de Bootstrap -->
		<!--<link href="./includes/css/bootstrap.min.css" rel="stylesheet" media="screen"> 
		<link rel="stylesheet" type="text/css" href="./includes/css/style.css"> 
		<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/3.1.1/css/font-awesome.css">
		<script type="text/javascript" src="./includes/jquery/jquery-3.1.1.js"></script>-->
		    <!-- CSS de Bootstrap -->
		<link href="includes/css/bootstrap.min.css" rel="stylesheet" media="screen"> 
		<link rel="stylesheet" type="text/css" href="includes/css/style.css"> 
		<script type="text/javascript" src="includes/jquery/jquery-3.1.1.js"></script>
		<script src="./includes/js/bootstrap.min.js"></script>
		<script src="http://code.responsivevoice.org/responsivevoice.js"></script>
	</head>
	<body onLoad="setInterval('seleccion()',1000);">
		<nav class="navbar navbar-default" role="navigation">
		  <!-- El logotipo y el icono que despliega el menú se agrupan
			   para mostrarlos mejor en los dispositivos móviles -->
		  <div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse"
					data-target=".navbar-ex1-collapse">
			  <span class="sr-only">Desplegar navegación</span>
			  <span class="icon-bar"></span>
			  <span class="icon-bar"></span>
			  <span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="javascript:goHome()"><span class="glyphicon glyphicon glyphicon-home"></span> SW-Comunication</a>
		  </div>
		 
		  <!-- Agrupar los enlaces de navegación, los formularios y cualquier
			   otro elemento que se pueda ocultar al minimizar la barra -->
		  <div class="collapse navbar-collapse navbar-ex1-collapse">
			<ul class="nav navbar-nav">
			  <li class="active" id="btnModo"><button type="button" class="btn btn-default navbar-btn" onclick="cambiarModo()" id="btnModo">Cambiar de modo</button></li>
			  <li id="liOpciones"><button type="button" class="btn btn-default navbar-btn" onclick="setOpciones()" id="btnOpciones"> Añadir/Quitar Opción</button></li>
			  <p class="navbar-text" id="speedText" value=2>Velocidad: 2s</p>
			  <li><button type="button" class="btn btn-default navbar-btn" onclick="aumentarVelocidad()">-</button></li>
			  <li><button type="button" class="btn btn-default navbar-btn" onclick="disminuirVelocidad()">+</button></li>
			  <p class="navbar-text">Voz</p>
			  <button type="button" class="btn btn-default navbar-btn" onclick="mute()" id="btnMute"><span class="glyphicon glyphicon glyphicon-volume-up"></span></button>
			</ul>		 
			<ul class="nav navbar-nav navbar-right">
			  <li id="liAyuda"><button type="button" class="btn btn-default navbar-btn" onclick="ayuda()" id="btnAyuda">Ayuda <span class="glyphicon glyphicon glyphicon-question-sign"></span></button></li>
			  <p class="navbar-text" id="user">Niño <span class="glyphicon glyphicon glyphicon-user"></span></p>
			</ul>
		  </div>
		</nav>
		<div class="jumbotron">
		  <div class="container">
			<h2>Preguntas Rápidas</h2>
			<p id="textOp">Configure pregunta y respuestas en Modo Madre y a contestar!</p>
		  </div>
		</div>
		<div class="container-fluid">
			<div class="row">
				<div class ="col-md-3"></div>
				<div class="col-md-6">
					<input type="text" class="form-control" id="pregunta" placeholder="Título de la pregunta (vacío)" value="">
				</div>
				<div class ="col-md-3"></div>
			</div>
			<br>
			<div class="row">
				<div class ="col-md-1"></div>
				<div class="col-md-10">
				<div class="input-group" id="respuestas">
				  <input type="text" class="form-control" id="r1" value="Sí">
				  <input type="text" class="form-control" id="r2" value="No">
				  <input type="text" class="form-control" id="r3" value="Nueva" style="display:none">
				  <input type="text" class="form-control" id="ratras" value="Atrás" readonly>
				</div>
				<div class ="col-md-1"></div>
				</div>
			</div><br>
			<div id="textoAbajo" style="display:none">Para descargar nuestra aplicación en su ordenador: <a href="" download="Sw-Comunication">Pulse aquí</a></div>
		</div>
		<!-- Modal -->
		<div id="myModal" class="modal fade" role="dialog">
		  <div class="modal-dialog">

			<!-- Modal content-->
			<div class="modal-content">
			  <div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"></button>
				<h3 class="modal-title">Ayuda para usar SW-Comunication</h3>
			  </div>
			  <div class="modal-body">
				<h4>Modo niño:</h4>
				<p>Funciona mediante un simple click.</br>Cuando vea o escuche la opción deseada seleccionada en verde se debe hacer click.</p>
				</br>
				<h4>Modo madre:</h4>
				<p>Se debe pulsar con el ratón en la opción "Cambiar de modo" del menú superior.</br>Una vez con las opciones en verde se puede empezar a configurar la aplicación.</br>
				Se puede silenciar la voz desde el botón del menú superior.</br>
				La velocidad se puede aumentar o disminuir entre 1, 2 o 3 segundos mediante los botones "+" y "-".</br>
				Se puede añadir una respuesta adicional o quitarla con el botón del menú superior.</br>
				Si se rellena el campo del título de la pregunta será dictado también por voz e incluido en la secuencia. Basta con borrarlo para que no sea incluido.</br>
				Los cambios se verán reflejados al volver al modo niño, basta con volver a pulsar en "Cambiar de modo".<br>
				Se puede descargar la versión de escritorio de la aplicación desde el enlace ubicado al final de la página.
				</p>
			  </div>
			  <div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
			  </div>
			</div>

		  </div>
		</div>
		<div id="modal1" class="modal fade" role="dialog">
		  <div class="modal-dialog">
			<!-- Modal content-->
			<div class="modal-content">
			  <div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"></button>
				<h3 class="modal-title"><p id="modalText1">Respuesta elegida: </p></h3>
			  </div>
			  <div class="modal-footer">
				<p> Haz otro click para salir</p>
			  </div>
			</div>
		  </div>
		</div>
		
		<div id="modal2" class="modal fade" role="dialog">
		  <div class="modal-dialog">
			<!-- Modal content-->
			<div class="modal-content">
			  <div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"></button>
				<h3 class="modal-title"><p id="modalText2">Respuesta elegida: </p></h3>
			  </div>
			  <div class="modal-footer">
				<p> Haz otro click para salir</p>
			  </div>
			</div>
		  </div>
		</div>
		
		<div id="modal3" class="modal fade" role="dialog">
		  <div class="modal-dialog">
			<!-- Modal content-->
			<div class="modal-content">
			  <div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"></button>
				<h3 class="modal-title"><p id="modalText3">Respuesta elegida: </p></h3>
			  </div>
			  <div class="modal-footer">
				<p> Haz otro click para salir</p>
			  </div>
			</div>
		  </div>
		</div>
		
		<script>
		var speed = getGET();
		$('#speedText').value = speed;
		$('#speedText').text("Velocidad: " + speed + "s");
		var op1 = true;
		var op2 = false;
		var opatras = false;
		var op3 = false;
		var mode = true; //true-->niño, false-->madre
		var ini = true; //variable para que no salte el click de volver del modo madre
		var voz = true;
		var titulo = false;
		var opciones = 2;
		var tituloModo = false;
		var respondiendo = false;
		var cont = 0;
		if(responsiveVoice.voiceSupport()) {
		responsiveVoice.setDefaultVoice("Spanish Female");
		}
		if(responsiveVoice.voiceSupport()) {
		if(voz == true){
			var bla = $('#r1').val();
			responsiveVoice.speak(bla);
		}
		}
			function seleccion() {
				if(mode == true && respondiendo == false){
					if(cont == speed){
						cont = 0;
						if(tituloModo == false)
							seleccionSinTitulo();
						else{
							seleccionConTitulo();
							}
					}
					else{
						cont++;
					}
				}
				else{
					if(opciones == 2){
					document.getElementById("r1").style = "background-color: #00cd00";
					document.getElementById("r2").style = "background-color: #00cd00";
					document.getElementById("ratras").style = "background-color: #00cd00";
					document.getElementById("r3").style = "display: none;";
					}
					else{
					document.getElementById("r1").style = "width:25%; background-color: #00cd00";
					document.getElementById("r2").style = "width:25%; background-color: #00cd00";
					document.getElementById("ratras").style = "width:25%; background-color: #00cd00";
					document.getElementById("r3").style = "display: block; width:25%; background-color: #00cd00";
					}
				}
			}
			$(document).click(function(){
					//alert("has pulsado en botn");
				if(mode == true && ini == true){
					if(respondiendo == false){
						if(op1 == true){
							var bla = $('#r1').val();
							respondiendo = true;
							document.getElementById("modalText1").innerHTML = "Has seleccionado: "+bla;
							$('#modal1').modal('show');
						if(responsiveVoice.voiceSupport()) {
							if(voz == true){
								var aux = "Has seleccionado ";
								bla = aux.concat(bla);
								responsiveVoice.speak(bla);
							}
						}
						}
						else if(op2 == true){
							var bla = $('#r2').val();
							respondiendo = true;
							document.getElementById("modalText2").innerHTML = "Has seleccionado: "+bla;
							$('#modal2').modal('show');
						if(responsiveVoice.voiceSupport()) {
							if(voz == true){
								var bla = $('#r2').val();
								var aux = "Has seleccionado ";
								bla = aux.concat(bla);
								responsiveVoice.speak(bla);
							}
						}
						}
						else if(opatras == true){
							window.location = "./home.html";
						}
						else if(op3 == true){
							var bla = $('#r3').val();
							respondiendo = true;
							document.getElementById("modalText3").innerHTML = "Has seleccionado: "+bla;
							$('#modal3').modal('show');
						if(responsiveVoice.voiceSupport()) {
							if(voz == true){
								var bla = $('#r3').val();
								var aux = "Has seleccionado ";
								bla = aux.concat(bla);
								responsiveVoice.speak(bla);
							}
						}
						}
					}
					else{
						respondiendo = false;
						$('#modal2').modal('hide');
						$('#modal1').modal('hide');
						$('#modal3').modal('hide');
					}
				}
				else if(mode == true && ini == false){
					ini = true;
				}
					// si lo deseamos podemos eliminar el evento click
					// una vez utilizado por primera vez FALTA JQUERY!
			})
			function cambiarModo(){
			//primero va el click del boton y luego la función del documento
				if(mode == true){
					$('#textOp').text("Modo madre: puede configurar la aplicación");
					ini = false;
					document.getElementById("user").innerHTML = "Madre <span class='glyphicon glyphicon glyphicon-user'></span>";
					document.getElementById("btnAyuda").style ="background-color:#eee; border-color:#eee;"
					document.getElementById("liAyuda").style ="background-color:#eee; border-color:#eee;"
					document.getElementById("btnOpciones").style ="background-color:#eee; border-color:#eee;"
					document.getElementById("liOpciones").style ="background-color:#eee; border-color:#eee;"
					document.getElementById("textoAbajo").style = "display:block";
					mode = false;
					
				}
				else{
					$('#textOp').text("Configure pregunta y respuestas en Modo Madre y a contestar!");
					document.getElementById("user").innerHTML = "Niño <span class='glyphicon glyphicon glyphicon-user'></span>";
					document.getElementById("btnAyuda").style ="background-color:#f8f8f8; border-color:#f8f8f8;"
					document.getElementById("liAyuda").style ="background-color:#f8f8f8; border-color:#f8f8f8;"
					document.getElementById("btnOpciones").style ="background-color:#f8f8f8; border-color:#f8f8f8;"
					document.getElementById("liOpciones").style ="background-color:#f8f8f8; border-color:#f8f8f8;"
					document.getElementById("textoAbajo").style = "display:none";
					if(document.getElementById("pregunta").value != ""){
						tituloModo = true;
						titulo = false;
						op1 = false;
						op2 = false;
						opatras = true;
						}
					else
						tituloModo = false;
					mode = true;
				}
			}
			//speed solo puede tener los valores 1 2 o 3
			function aumentarVelocidad(){
				if (mode == false){
					if(speed > 1){
						speed--;
						cont = 0;
						if(speed == 1){
							$('#speedText').text("Velocidad: 1s");
							$('#speedText').value = 1;
						}
						else{ //speed == 2
							$('#speedText').text("Velocidad: 2s");
							$('#speedText').value = 2;
						}
						}
				}
			}
			function disminuirVelocidad(){
				if (mode == false){
					if(speed < 3){
						speed++;
						cont = 0;
						if(speed == 2){
							$('#speedText').text("Velocidad: 2s");
							$('#speedText').value = 2;
						}
						else{ //speed == 3
							$('#speedText').text("Velocidad: 3s");
							$('#speedText').value = 3;
						}
						}
				}
			}
			function setOpciones(){
			if(mode == false){
				if(opciones == 2){
					opciones = 3;
					}
				else{
					opciones = 2;
					}
			}
			}
			function mute(){
				if(mode == false){
					if(voz == true){
						voz = false;
						document.getElementById("btnMute").innerHTML = "<span class='glyphicon glyphicon glyphicon-volume-off'></span>";
					}
					else{
						voz = true;
						document.getElementById("btnMute").innerHTML = "<span class='glyphicon glyphicon glyphicon-volume-up'></span>";
					}
				}
			}
			function ayuda(){
				if(mode == false)
				$('#myModal').modal('show');
			}
			function goHome(){
				if(mode == false)
					window.location = "./home.html?speed="+ speed + "";
			}
			function seleccionSinTitulo(){
				if(opciones == 2){
					if(op1 == true){
						op1 = false;
						op2 = true;
						opatras = false;
						document.getElementById("r1").style = "background-color: #ff3333";
						document.getElementById("r2").style = "background-color: #00cd00";
						document.getElementById("ratras").style = "background-color: #ff3333";
						if(responsiveVoice.voiceSupport()) {
						if(voz == true){
							var bla = $('#r2').val();
							responsiveVoice.speak(bla);
						}
						}
					}
					else if(op2 == true){
						op1 = false;
						op2 = false;
						opatras = true;
						document.getElementById("r1").style = "background-color: #ff3333";
						document.getElementById("r2").style = "background-color: #ff3333";
						document.getElementById("ratras").style = "background-color: #00cd00";
						if(responsiveVoice.voiceSupport()) {
						if(voz == true){
							//var bla = $('#r2').val();
							responsiveVoice.speak("volver atrás");
						}
						}
					}
					else if(opatras == true){
						op1 = true;
						op2 = false;
						opatras = false;
						document.getElementById("r1").style = "background-color: #00cd00";
						document.getElementById("r2").style = "background-color: #ff3333";
						document.getElementById("ratras").style = "background-color: #ff3333";
						if(responsiveVoice.voiceSupport()) {
						if(voz == true){
							var bla = $('#r1').val();
							responsiveVoice.speak(bla);
						}
						}
					}
				}else{
					if(op1 == true){
						op1 = false;
						op2 = true;
						op3 = false;
						opatras = false;
						document.getElementById("r1").style = "width:25%; background-color: #ff3333";
						document.getElementById("r2").style = "width:25%;background-color: #00cd00";
						document.getElementById("r3").style = "width:25%;background-color: #ff3333";
						document.getElementById("ratras").style = "width:25%;background-color: #ff3333";
						if(responsiveVoice.voiceSupport()) {
						if(voz == true){
							var bla = $('#r2').val();
							responsiveVoice.speak(bla);
						}
						}
					}
					else if(op2 == true){
						op1 = false;
						op2 = false;
						op3 = true;
						opatras = false;
						document.getElementById("r1").style = "width:25%;background-color: #ff3333";
						document.getElementById("r2").style = "width:25%;background-color: #ff3333";
						document.getElementById("r3").style = "width:25%;background-color: #00cd00";
						document.getElementById("ratras").style = "width:25%;background-color: #ff3333";
						if(responsiveVoice.voiceSupport()) {
						if(voz == true){
							var bla = $('#r3').val();
							responsiveVoice.speak(bla);
						}
						}
					}
					else if(op3 == true){
						op1 = false;
						op2 = false;
						op3 = false;
						opatras = true;
						document.getElementById("r1").style = "width:25%;background-color: #ff3333";
						document.getElementById("r2").style = "width:25%;background-color: #ff3333";
						document.getElementById("r3").style = "width:25%;background-color: #ff3333";
						document.getElementById("ratras").style = "width:25%;background-color: #00cd00";
						if(responsiveVoice.voiceSupport()) {
						if(voz == true){
							var bla = $('#r3').val();
							responsiveVoice.speak("Volver atrás");
						}
						}
					}
					else if(opatras == true){
						op1 = true;
						op2 = false;
						op3 = false;
						opatras = false;
						document.getElementById("r1").style = "width:25%;background-color: #00cd00";
						document.getElementById("r2").style = "width:25%;background-color: #ff3333";
						document.getElementById("r3").style = "width:25%;background-color: #ff3333";
						document.getElementById("ratras").style = "width:25%;background-color: #ff3333";
						if(responsiveVoice.voiceSupport()) {
						if(voz == true){
							var bla = $('#r1').val();
							responsiveVoice.speak(bla);
						}
						}
					}
				}
			}
			function setTitulo(){
			
			}
			function seleccionConTitulo(){
				if(opciones == 2){
					if(titulo == true){
						op1 = true;
						op2 = false;
						opatras = false;
						titulo = false;
						document.getElementById("r1").style = "background-color: #00cd00";
						document.getElementById("r2").style = "background-color: #ff3333";
						document.getElementById("ratras").style = "background-color: #ff3333";
						document.getElementById("pregunta").style = "background-color: #ffffff";
						if(responsiveVoice.voiceSupport()) {
						if(voz == true){
							var bla = $('#r1').val();
							responsiveVoice.speak(bla);
						}
						}
					}
					else if(op1 == true){
						op1 = false;
						op2 = true;
						opatras = false;
						titulo = false;
						document.getElementById("r1").style = "background-color: #ff3333";
						document.getElementById("r2").style = "background-color: #00cd00";
						document.getElementById("ratras").style = "background-color: #ff3333";
						document.getElementById("pregunta").style = "background-color: #ffffff";
						if(responsiveVoice.voiceSupport()) {
						if(voz == true){
							var bla = $('#r2').val();
							responsiveVoice.speak(bla);
						}
						}
					}
					else if(op2 == true){
						op1 = false;
						op2 = false;
						opatras = true;
						titulo = false;
						document.getElementById("r1").style = "background-color: #ff3333";
						document.getElementById("r2").style = "background-color: #ff3333";
						document.getElementById("ratras").style = "background-color: #00cd00";
						document.getElementById("pregunta").style = "background-color: #ffffff";
						if(responsiveVoice.voiceSupport()) {
						if(voz == true){
							//var bla = $('#r1').val();
							responsiveVoice.speak("Volver atrás");
						}
						}
					}
					else if(opatras == true){
						op1 = false;
						op2 = false;
						opatras = false;
						titulo = true;
						document.getElementById("r1").style = "background-color: #00cd00";
						document.getElementById("r2").style = "background-color: #00cd00";
						document.getElementById("ratras").style = "background-color: #00cd00";
						document.getElementById("pregunta").style = "background-color: #ffffff; border:2px solid #00cd00;";
						if(responsiveVoice.voiceSupport()) {
						if(voz == true){
							var bla = $('#pregunta').val();
							responsiveVoice.speak(bla);
						}
						}
					}
				}
				else{
					if(titulo == true){
						op1 = true;
						op2 = false;
						op3 = false;
						opatras = false;
						titulo = false;
						document.getElementById("r1").style = "width:25%;background-color: #00cd00";
						document.getElementById("r2").style = "width:25%;background-color: #ff3333";
						document.getElementById("r3").style = "width:25%;background-color: #ff3333";
						document.getElementById("ratras").style = "width:25%;background-color: #ff3333";
						document.getElementById("pregunta").style = "background-color: #ffffff";
						if(responsiveVoice.voiceSupport()) {
						if(voz == true){
							var bla = $('#r1').val();
							responsiveVoice.speak(bla);
						}
						}
					}
					else if(op1 == true){
						op1 = false;
						op2 = true;
						op3 = false;
						opatras = false;
						titulo = false;
						document.getElementById("r1").style = "width:25%;background-color: #ff3333";
						document.getElementById("r2").style = "width:25%;background-color: #00cd00";
						document.getElementById("r3").style = "width:25%;background-color: #ff3333";
						document.getElementById("ratras").style = "width:25%;background-color: #ff3333";
						document.getElementById("pregunta").style = "background-color: #ffffff";
						if(responsiveVoice.voiceSupport()) {
						if(voz == true){
							var bla = $('#r2').val();
							responsiveVoice.speak(bla);
						}
						}
					}
					else if(op2 == true){
						op1 = false;
						op2 = false;
						op3 = true;
						opatras = false;
						titulo = false;
						document.getElementById("r1").style = "width:25%;background-color: #ff3333";
						document.getElementById("r2").style = "width:25%;background-color: #ff3333";
						document.getElementById("r3").style = "width:25%;background-color: #00cd00";
						document.getElementById("ratras").style = "width:25%;background-color: #ff3333";
						document.getElementById("pregunta").style = "background-color: #ffffff";
						if(responsiveVoice.voiceSupport()) {
						if(voz == true){
							var bla = $('#r3').val();
							responsiveVoice.speak(bla);
						}
						}
					}
					else if(op3 == true){
						op1 = false;
						op2 = false;
						op3 = false;
						opatras = true;
						titulo = false;
						document.getElementById("r1").style = "width:25%;background-color: #ff3333";
						document.getElementById("r2").style = "width:25%;background-color: #ff3333";
						document.getElementById("ratras").style = "width:25%;background-color: #00cd00";
						document.getElementById("r3").style = "width:25%;background-color: #ff3333";
						document.getElementById("pregunta").style = "background-color: #ffffff";
						if(responsiveVoice.voiceSupport()) {
						if(voz == true){
							//var bla = $('#r3').val();
							responsiveVoice.speak("Volver atrás");
						}
						}
					}
					else if(opatras == true){
						op1 = false;
						op2 = false;
						op3 = false;
						opatras = false;
						titulo = true;
						document.getElementById("r1").style = "width:25%;background-color: #00cd00";
						document.getElementById("r2").style = "width:25%;background-color: #00cd00";
						document.getElementById("r3").style = "width:25%;background-color: #00cd00";
						document.getElementById("ratras").style = "width:25%;background-color: #00cd00";
						document.getElementById("pregunta").style = "background-color: #ffffff; border:2px solid #00cd00;";
						if(responsiveVoice.voiceSupport()) {
						if(voz == true){
							var bla = $('#pregunta').val();
							responsiveVoice.speak(bla);
						}
						}
					}
				}
			}
			
			function getGET()
			{
				var loc = document.location.href;
				if(loc.indexOf('?')>0)
				{
					var getString = loc.split('=')[1];
					return getString;
				}
			}
		</script>
  
		<script src="http://code.jquery.com/jquery.js"></script>
		<script src="./includes/js/bootstrap.min.js"></script>
	</body>
</html>

